var SweetAlert=function(){
    return{
        init:function(){$(".mt-delete").each(
        function(){
            var t=$(this).data("title"),
                a=$(this).data("message"),
                s=$(this).data("type"),
                e=$(this).data("allow-outside-click"),
                n=$(this).data("show-confirm-button"),
                c=$(this).data("show-cancel-button"),
                o=$(this).data("close-on-confirm"),
                i=$(this).data("close-on-cancel"),
                l=$(this).data("confirm-button-text"),
                u=$(this).data("cancel-button-text"),
                h=$(this).data("popup-title-success"),
                d=$(this).data("popup-message-success"),
                r=$(this).data("popup-title-cancel"),
                f=$(this).data("popup-message-cancel"),
                p=$(this).data("confirm-button-class"),
                m=$(this).data("cancel-button-class"),
                form = $(this).closest('form')[0],
                url  = form.action,
                data = $(form).serialize(),
                tr = $(this).closest('tr')[0];


            $(this).click(function(e){
                e.preventDefault();
                swal({title:t,text:a,type:s,allowOutsideClick:e,showConfirmButton:n,showCancelButton:c,confirmButtonClass:p,cancelButtonClass:m,closeOnConfirm:o,closeOnCancel:i,confirmButtonText:l,cancelButtonText:u},
                    function(isConfirm){

                        if (!isConfirm) return;

                        $.ajax({
                            url: url,
                            type: "DELETE",
                            data:  data,
                            dataType: "html",
                            success: function () {
                                swal("Done!","El registro fue eliminado correctamente!","success");
                                $(tr).fadeOut();
                                $(tr).fadeIn();
                                $(tr).fadeOut();
                                $(tr).fadeIn();
                                $(tr).fadeOut();
                                $(tr).remove();


                            }
                        });
                    }
                )}
            )}
    )}
}}();
    
jQuery(document).ready(function(){SweetAlert.init()});
